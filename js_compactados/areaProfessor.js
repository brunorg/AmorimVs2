function CarregaServicoMensagens(){HtmlContent='<table class="mensagensTabela">',contador=0,$.ajax({url:path+"Mensagens/Proprietario/"+userID,type:"GET",async:!1,crossDomain:!0,success:function(a){Limite=a.length;for(var b=0;b<a.length;b++)"N"==a[b].lida&&"S"==a[b].cxEntrada&&"N"==a[b].cxEnviada&&contador++;for(var c=Limite-1;c>=0;c--)"N"==a[c].lida&&"S"==a[c].cxEntrada&&"N"==a[c].cxEnviada&&(HtmlContent+="<tr>",HtmlContent+='<td class="dataMsg" onClick="window.location=\'mensagens.html?ID='+a[c].idmensagens+'\';" style=" line-height: 13px;""><h4 class="user">'+(null!=a[c].remetente.aluno?a[c].remetente.aluno.nome:a[c].remetente.professor.nome)+"</h4>"+a[c].assunto.substring(0,40)+(a[c].assunto.length<40?"</td>":"...</td>"));HtmlContent+="</table>",$(".Mensagens_Conteudo").append(HtmlContent),$(".Mensagens_Cabecalho_Imagem_Contador").html(contador<=9?contador:"9+")},error:function(){retorno="erro"}})}function CarregaServicoCalendarioEventos(){HtmlContent="";for(var a=getData("Calendario/Evento",46),b=0;b<a.length;b++)b<5?(HtmlContent+='<div class="Conteudo_Coluna3_Agenda_Evento">',HtmlContent+='<div class="Conteudo_Coluna3_Agenda_Evento_Conteudo">'+a[b].evento,HtmlContent+='<div class="Conteudo_Coluna3_Agenda_Evento_Titulo">'+a[b].dataInicio.substring(8,10)+"/"+a[b].dataInicio.substring(5,7)+"/"+a[b].dataInicio.substring(0,4)+"</div>",HtmlContent+='<div class="Conteudo_Coluna3_Agenda_Evento_Hora">'+a[b].hora+"</div>",""!=a[b].imagem&&null!=a[b].imagem&&void 0!=a[b].imagem&&(HtmlContent+='<br /><img src="'+a[b].imagem+'" width="80%" style="margin-left: 14px;"/>'),HtmlContent+="</div>",HtmlContent+="</div>"):(HtmlContent+='<div class="Conteudo_Coluna3_Agenda_Evento AgendaNulo">',HtmlContent+='<div class="Conteudo_Coluna3_Agenda_Evento_Titulo">'+a[b].dataInicio.substring(8,10)+"/"+a[b].dataInicio.substring(5,7)+"/"+a[b].dataInicio.substring(0,4)+"</div>",HtmlContent+='<div class="Conteudo_Coluna3_Agenda_Evento_Conteudo">'+a[b].evento,""!=a[b].imagem&&null!=a[b].imagem&&void 0!=a[b].imagem&&(HtmlContent+="<br />"+a[b].imagem),HtmlContent+="</div>",HtmlContent+="</div>");$("#Light_Eventos_Tabela").append(HtmlContent),OrdenarPor("Conteudo_Coluna3_Agenda_Evento_Titulo"),$(".Conteudo_Coluna3_Agenda_Evento").css("display","none");for(var c=0;c<5;c++)void 0!=document.getElementsByClassName("Conteudo_Coluna3_Agenda_Evento")[c]&&(document.getElementsByClassName("Conteudo_Coluna3_Agenda_Evento")[c].style.display="block")}function CarregaServicoMural(){HtmlContent="";var a=getData("Calendario/Evento",44);console.log(a);for(var b=0;b<a.length;b++){var c=a[b].dataInicio.substring(8,10)+"/"+a[b].dataInicio.substring(5,7)+"/"+a[b].dataInicio.substring(0,4);HtmlContent+='<tr><td class="dataMsg" onclick="window.location=\'#\';" style="background-color:rgb(247, 242, 222); line-height: 13px;"><span><h2 style="color:rgb(218,93,48); margin-top:0px;float:left;">'+a[b].evento+'</h2></span><p style="clear: both;margin-bottom: 10px;"></p><span><h3 style="margin-bottom:0px;font-weight: 100;">'+a[b].descricao+'</h3></span></td><td style="background-color:rgb(247, 242, 222); line-height: 13px;"><span><h2 style="color:rgb(218,93,48);margin-top:0px;float:right;width:74%;margin-top: 10px;">'+c+'</h2></span><span><h2 style="color:rgb(218,93,48);font-weight: normal; margin-top:0px;float:right;margin-right: 14px;">'+a[b].hora+"</h2></span></td></tr>"}$("#Light_MuralTabela").html(HtmlContent)}function CarregaServicoGrupo(){var a="";LimiteAluno=0;for(var b=0;b<dataGrupo.length;b++){dataAlunoVariavel=getData("AlunoVariavel/grupo",dataGrupo[b].idgrupo);for(var c=0;c<dataAlunoVariavel.length;c++){var g,d=0,e=0,f=0;$.ajax({type:"GET",async:!1,crossDomain:!0,url:path+"AtribuicaoRoteiroExtra/aluno/"+dataAlunoVariavel[c].aluno.idAluno}).then(function(a){g=a});for(var h=0;h<dataObjetivo.length;h++)if("1"==dataObjetivo[h].ativo&&"1"==dataObjetivo[h].roteiro.ativo&&dataObjetivo[h].roteiro.anoEstudo.idanoEstudo==dataAlunoVariavel[c].anoEstudo.idanoEstudo)d++;else for(var i=0;i<g.length;i++)"1"==dataObjetivo[h].ativo&&dataObjetivo[h].roteiro.idroteiro==g[i].idroteiro&&dataObjetivo[h].roteiro.anoEstudo.ano<dataAlunoVariavel[c].anoEstudo.ano?e++:"1"==dataObjetivo[h].ativo&&dataObjetivo[h].roteiro.idroteiro==g[i].idroteiro&&dataObjetivo[h].roteiro.anoEstudo.ano>dataAlunoVariavel[c].anoEstudo.ano&&f++;dataPlanejamentoRoteiro=getData("PlanejamentoRoteiro/aluno",dataAlunoVariavel[c].aluno.idAluno);for(var j=0,k=0,l=0,m=0,n=0,o=0,h=0;h<dataPlanejamentoRoteiro.length;h++)"2"==dataPlanejamentoRoteiro[h].status?dataPlanejamentoRoteiro[h].objetivo.roteiro.anoEstudo.ano==dataAlunoVariavel[c].anoEstudo.ano?j++:dataPlanejamentoRoteiro[h].objetivo.roteiro.anoEstudo.ano<dataAlunoVariavel[c].anoEstudo.ano?k++:dataPlanejamentoRoteiro[h].objetivo.roteiro.anoEstudo.ano>dataAlunoVariavel[c].anoEstudo.ano&&l++:"3"==dataPlanejamentoRoteiro[h].status&&(dataPlanejamentoRoteiro[h].objetivo.roteiro.anoEstudo.ano==dataAlunoVariavel[c].anoEstudo.ano?(j++,m++):dataPlanejamentoRoteiro[h].objetivo.roteiro.anoEstudo.ano<dataAlunoVariavel[c].anoEstudo.ano?(k++,n++):dataPlanejamentoRoteiro[h].objetivo.roteiro.anoEstudo.ano>dataAlunoVariavel[c].anoEstudo.ano&&(l++,o++));LimiteAluno++,SerieAtual=0,SerieAtualCorrigido=0,0!=e&&(SerieAnterior=k/e*100,SerieAnteriorCorrigido=0!=n?n/k*100:0),0!=d&&(SerieAtual=j/d*100,SerieAtualCorrigido=0!=m?m/j*100:0),0!=f&&(SerieProxima=l/f*100,SerieProximaCorrigido=0!=o?o/l*100:0),a+='<div class="Grafico_Individual_Aluno">',a+='<div class="Grafico_Individual_Aluno_Falta_Numero">'+presencaAluno(dataAlunoVariavel[c].aluno.idAluno)+"</div>",a+='<div class="Grafico_Individual_Aluno_Escala">',0==e&&0==f?(a+='<div class="Porcentagem_Objetivos_Serie_Atual Porcentagem_Center" style="height:'+SerieAtual+'%;">',a+='<div class="Porcentagem_Objetivos_Serie_Atual_Corrigido" style="height:'+SerieAtualCorrigido+'%;"></div>',a+="</div>"):0!=f?(a+='<div class="Porcentagem_Objetivos_Serie_Atual Porcentagem_Left" style="height:'+SerieAtual+'%;">',a+='<div class="Porcentagem_Objetivos_Serie_Atual_Corrigido" style="height:'+SerieAtualCorrigido+'%;"></div>',a+="</div>",a+='<div class="Porcentagem_Objetivos_Serie_Proxima Porcentagem_Right" style="height:'+SerieProxima+'%;">',a+='<div class="Porcentagem_Objetivos_Serie_Proxima_Corrigido" style="height:'+SerieProximaCorrigido+'%;"></div>',a+="</div>"):0!=e&&(a+='<div class="Porcentagem_Objetivos_Serie_Anterior Porcentagem_Left" style="height:'+SerieAnterior+'%;">',a+='<div class="Porcentagem_Objetivos_Serie_Anterior_Corrigido" style="height:'+SerieAnteriorCorrigido+'%;"></div>',a+="</div>",a+='<div class="Porcentagem_Objetivos_Serie_Atual Porcentagem_Right" style="height:'+SerieAtual+'%;">',a+='<div class="Porcentagem_Objetivos_Serie_Atual_Corrigido" style="height:'+SerieAtualCorrigido+'%;"></div>',a+="</div>"),a+="</div>",a+='<a href="relatorioAluno.html?ID='+base64_encode(""+dataAlunoVariavel[c].aluno.idAluno)+'"><div class="Grafico_Individual_Aluno_Foto_Hover" nomeAluno="'+dataAlunoVariavel[c].aluno.nome+'">',a+='<img src="'+dataAlunoVariavel[c].aluno.fotoAluno+'"></img>',a+="</div></a></div>"}}LimiteAluno<22?($("#Grade_Aluno_Grafico_Mask").css("width","924px"),$(".Grafico_Individual_Aluno_Overflow").css("width","924px"),$(".Grafico_Individual_Aluno_Overflow").html(a)):($("#Grade_Aluno_Grafico_Mask").css("width",""+42*LimiteAluno+"px"),$(".Grafico_Individual_Aluno_Overflow").css("width",""+42*LimiteAluno+"px"),$(".Grafico_Individual_Aluno_Overflow").html(a)),$("body").append('<div class="aluno_foco"> </div>'),$(".Grafico_Individual_Aluno_Foto_Hover").mouseover(function(a){var b=a.pageX,c=a.pageY;$(".aluno_foco").html($(this).attr("nomeAluno"));var d=$(".aluno_foco").width(),e=$(".aluno_foco").height();$(".aluno_foco").css("left",b-d+"px"),$(".aluno_foco").css("top",c+2*e+"px"),$(".aluno_foco").show()}).mouseout(function(){$(".aluno_foco").hide()})}function OrdenarPor(a){$("#Conteudo_Coluna3_Agenda_Evento_Content").find(".Conteudo_Coluna3_Agenda_Evento").sort(function(b,c){return b.getElementsByClassName(a)[0].innerHTML.substring(8,10)+b.getElementsByClassName(a)[0].innerHTML.substring(5,7)+b.getElementsByClassName(a)[0].innerHTML.substring(0,2)>c.getElementsByClassName(a)[0].innerHTML.substring(8,10)+c.getElementsByClassName(a)[0].innerHTML.substring(5,7)+c.getElementsByClassName(a)[0].innerHTML.substring(0,2)}).appendTo($("#Conteudo_Coluna3_Agenda_Evento_Content"))}function carregaAlunos(){$("#nomeAluno").val("");for(var b=getData("AlunoVariavel",null),c="",f=($("#PesqAnoEstudo").val(),$("#periodo").val(),0);f<b.length;f++)c+='<tr id="aluno" onClick="visualizar('+b[f].aluno.idAluno+')"><td class="alunoNome">'+b[f].aluno.nome+'</td><td class="alunoAno">'+b[f].anoEstudo.ano+'\xba Ano</td><td class="alunoPeriodo">'+b[f].periodo.periodo+"</td></tr>";$("#lista").html(c)}function visualizar(a){return localStorage.setItem("alunoEdt",a),location.href="relatorioAluno.html?ID="+base64_encode(""+a),!1}var HtmlContent,contador,conf,dataAlunoVariavel,dataPlanejamentoRoteiro,dataObjetivo=getData("Objetivo",null),dataCalendarioEventos=getData("Calendario",null),dataGrupo,userID=usuarioId,IDProfessor=getAlunoByUsuario(userID);$(document).ready(function(){CarregaServicoMensagens(),CarregaServicoCalendarioEventos(),CarregaServicoMural(),1==verificaTutor(IDProfessor)?(dataGrupo=getData("ProfessorFuncionario/ProfessorGrupo",IDProfessor),CarregaServicoGrupo(),$("#graficoTutor").show()):($("#pesquisaAlunos").show(),carregaAnoEstudo(),carregaPeriodo("aluno"),carregaAlunos("todos"))});