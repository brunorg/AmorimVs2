function carregaCheck(){$(".css-label").click(function(){var a=$(this).attr("id");if(0==$(this).hasClass("selecionado")){$(this).css("background-position","-38px 0px").addClass("selecionado");for(var b=getData("PresencaProfessor",null),c=0;c<b.length;c++){var d=new Date,e=d.getUTCFullYear()+"-"+(d.getUTCMonth()+1)+"-"+d.getUTCDate(),f=b[c].data.split("-"),g=f[0],h=parseInt(f[1]),i=f[2];f=g+"-"+h+"-"+i,e==f&&a==b[c].professor.idprofessorFuncionarioVariavel&&chamada(a,"1",b[c].idpresencaProfessor)}}else{$(this).css("background-position","0px 0px").removeClass("selecionado");for(var b=getData("PresencaProfessor",null),c=0;c<b.length;c++){var d=new Date,e=d.getUTCFullYear()+"-"+(d.getUTCMonth()+1)+"-"+d.getUTCDate(),f=b[c].data.split("-"),g=f[0],h=parseInt(f[1]),i=f[2];f=g+"-"+h+"-"+i,e==f&&a==b[c].professor.idprofessorFuncionarioVariavel&&chamada(a,"0",b[c].idpresencaProfessor)}}})}function carregaChamadaDia(){for(var a=new Date,b=a.getUTCFullYear()+"-"+(a.getUTCMonth()+1)+"-"+a.getUTCDate(),c=getData("PresencaProfessor",null),d=0;d<c.length;d++){var e=c[d].data.split("-"),f=e[0],g=parseInt(e[1]),h=e[2];e=f+"-"+g+"-"+h,b==e&&1==c[d].presenca&&$(".css-label[id='"+c[d].professor.idprofessorFuncionarioVariavel+"']").css("background-position","-38px 0px").addClass("selecionado")}}function chamada(a,b,c){var d=new Date,e=d.getUTCFullYear()+"-"+(d.getUTCMonth()+1)+"-"+d.getUTCDate();$.ajax({type:"POST",crossDomain:!0,url:path+"PresencaProfessor",data:"action=update&data="+e+"&presenca="+b+"&professor="+a+"&calendario=2&id="+c,success:function(){},error:function(){}})}function addChamada(a,b){$.ajax({type:"POST",crossDomain:!0,url:path+"PresencaProfessor",data:"action=create&data="+a+"&presenca=0&professor="+b+"&calendario=",success:function(){},error:function(){}})}$(document).ready(function(){for(var b=!1,c=new Date,d=c.getUTCFullYear()+"-"+(c.getUTCMonth()+1)+"-"+c.getUTCDate(),e=getData("PresencaProfessor",null),f=0;f<e.length;f++){var g=e[f].data.split("-"),h=g[0],i=parseInt(g[1]),j=g[2];if(g=h+"-"+i+"-"+j,d==g){b=!0;break}}$.ajax({type:"GET",crossDomain:!0,url:path+"ProfessorFuncionarioVariavel/listar/1"}).then(function(a){var c=[[]];$(".presenca_opcao").empty();for(var e=0;e<a.length;e++)0==b&&addChamada(d,a[e].idprofessorFuncionarioVariavel),$(".presenca_opcao").append('<input id="'+a[e].idprofessorFuncionarioVariavel+'" type="checkbox" name="presenca_opcao" value="'+a[e].idprofessorFuncionarioVariavel+' "class="presenca_check"><span class="css-label" for="'+a[e].idprofessorFuncionarioVariavel+'" id="'+a[e].idprofessorFuncionarioVariavel+'"></span><label>'+a[e].professorFuncionario.nome+"</label><br>"),c[e]=[],c[e][0]=a[e],c[e][1]=0;carregaCheck();var f;$("#pesquisaProfessor").keyup(function(){aux=[],f=$("#pesquisaProfessor").val();for(var a=0;a<c.length;a++)0==c[a][0].professorFuncionario.nome.toLowerCase().search(f.toLowerCase())&&(aux[aux.length]=[],aux[aux.length-1][0]=c[a][0],aux[aux.length-1][1]=c[a][1]);$(".presenca_opcao").empty();for(var a=0;a<aux.length;a++)$(".presenca_opcao").append(1==aux[a][1]?'<input id="'+aux[a][0].idprofessorFuncionarioVariavel+'" type="checkbox" name="presenca_opcao" value="'+aux[a][0].idprofessorFuncionarioVariavel+' "class="presenca_check" checked><span class="css-label" for="'+aux[a][0].idprofessorFuncionarioVariavel+'" id="'+aux[a][0].idprofessorFuncionarioVariavel+'"></span><label>'+aux[a][0].professorFuncionario.nome+"</label><br>":'<input id="'+aux[a][0].idprofessorFuncionarioVariavel+'" type="checkbox" name="presenca_opcao" value="'+aux[a][0].idprofessorFuncionario+' "class="presenca_check" ><span class="css-label" for="'+aux[a][0].idprofessorFuncionarioVariavel+'" id="'+aux[a][0].idprofessorFuncionarioVariavel+'"></span><label>'+aux[a][0].professorFuncionario.nome+"</label><br>");carregaCheck(),carregaChamadaDia()})}),window.setTimeout(function(){carregaChamadaDia()},200);var k=getData("Periodo",null);HtmlContent="";for(var l=0;l<k.length;l++)HtmlContent+="<option value='"+k[l].idperiodo+"'>"+k[l].periodo+"</option>";$("#periodoPres").html("<option></option>"+HtmlContent)});